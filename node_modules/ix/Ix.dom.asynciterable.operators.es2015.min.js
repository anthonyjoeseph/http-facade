(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxAsynciterableOperators'], factory) :
    (factory(global.IxAsynciterableOperators = global.IxAsynciterableOperators || {}));
}(this, (function (exports) {function f(a){return this instanceof f?this:new f(a)};function h(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function l(a){return a}async function m(a){return a};const r=a=>"function"===typeof a,t=a=>null!=a&&Object(a)===a;function y(a){return t(a)&&"number"===typeof a.length}function z(a){return null!=a&&r(a[Symbol.iterator])}function aa(a){return t(a)&&!r(a[Symbol.iterator])&&r(a.next)}function ba(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const ca=a=>t(a)&&r(a.pipe)&&r(a._read)&&"boolean"===typeof a.readable&&t(a._readableState),da=a=>t(a)&&r(a.end)&&r(a._write)&&"boolean"===typeof a.writable&&t(a._writableState);function ea(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const fa=Math.pow(2,53)-1;class A extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,A.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function B(a){if(a&&a.aborted)throw new A;}Object.defineProperty(A,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return t(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});class C{async forEach(a,b,c){const d=c?new ha(this,c):this;let e=0;for await(const g of d)await a.call(b,g,e++,c)}B(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](C.as(d));return d}static from(a,b=m,c){b=h(b,c);if(z(a)||t(a)&&r(a[Symbol.asyncIterator]))return new D(a,b);if(t(a)&&r(a.then))return new ja(a,b);if(ba(a))return new ka(a,b);if(y(a))return new F(a,b);if(aa(a))return new D({[Symbol.asyncIterator]:()=>a},b);throw new TypeError("Input type not supported");}static as(a){return a instanceof
C?a:"string"===typeof a?new F([a],m):z(a)||t(a)&&r(a[Symbol.asyncIterator])?new D(a,m):t(a)&&r(a.then)?new ja(a,m):ba(a)?new ka(a,m):y(a)?new F(a,m):new F([a],m)}}C.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(C,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
function la(a,b){if(a.K)throw Error("AsyncSink already ended");if(0<a.F.length){const {resolve:c,reject:d}=a.F.shift();"error"===b.type?d(b.error):c({done:!1,value:b.value})}else a.X.push(b)}
class ma{constructor(){this.K=!1;this.X=[];this.F=[]}[Symbol.asyncIterator](){return this}write(a){la(this,{type:"value",value:a})}error(a){la(this,{type:"error",error:a})}next(){if(0<this.X.length){const {type:a,value:b,error:c}=this.X.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,value:b})}return this.K?Promise.resolve({done:!0}):new Promise((a,b)=>{this.F.push({resolve:a,reject:b})})}end(){for(;0<this.F.length;)this.F.shift().resolve({done:!0});this.K=!0}}
class F extends C{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](){let a=0;const b=Math.min(Math.max(ea(this.g.length),0),fa);for(;a<b;)yield await this.i(this.g[a],a++)}}class D extends C{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](){let a=0;for await(const b of this.g)yield await this.i(b,a++)}}class ja extends C{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](){const a=await this.g;yield await this.i(a,0)}}
class ka extends C{constructor(a,b){super();this.ra=a;this.i=b}async*[Symbol.asyncIterator](a){function b(){c.error(new A)}B(a);const c=new ma,d=this.ra.subscribe({next(g){c.write(g)},error(g){c.error(g)},complete(){c.end()}});a&&a.addEventListener("abort",b);let e=0;try{for(let g;!(g=await c.next()).done;)B(a),yield await this.i(g.value,e++)}finally{a&&a.removeEventListener("abort",b),d.unsubscribe()}}}
class ha{constructor(a,b){this.g=a;this.V=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.V)}}try{(a=>{if(!a){C.prototype.pipe=function(...c){let d=-1;const e=c.length;let g=this,k;for(;++d<e;)if(k=c[d],"function"===typeof k)g=k(C.as(g));else if(da(k))return{end:c=!0}=c[d+1]||{},ca(g)?g.B(k,{end:c}):C.as(g).Aa(b(k)).B(k,{end:c});return g};var b=(c,d=c.wa||{za:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class G extends C{constructor(a,b){super();this.g=a;this.V=b}withAbort(a){return new G(this.g,a)}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.V)}}function I(a,b){return b?new G(a,b):a};class na extends C{constructor(a){super();this.g=a}[Symbol.asyncIterator](a){function b(){c.next().then(k=>{if(k.done)e=Promise.resolve({done:!0}),"waiting"===d.type&&d.Y.resolve(e);else{if("waiting"===d.type){const n=d.Y.resolve;d={type:"batching",values:[]};n({done:k.done,value:[k.value]})}else if("batching"===d.type)d.values.push(k.value);else throw Error(`Unhandled discriminated union member ${d}`);b()}},k=>{g=k;"waiting"===d.type&&d.Y.reject(k)})}B(a);const c=I(this.g,a)[Symbol.asyncIterator]();
let d={type:"batching",values:[]},e=null,g=null;b();return{next(){if(g)return Promise.reject(g);if("batching"===d.type&&0<d.values.length){const k=d.values;d.values=[];return Promise.resolve({done:!1,value:k})}if(e)return e;if("waiting"===d.type)throw Error("Previous `next()` is still in progress");return new Promise((k,n)=>{d={type:"waiting",Y:{resolve:k,reject:n}}})},return(k){return c.return?c.return(k).then(()=>({done:!0})):Promise.resolve({done:!0})}}}};class oa extends C{constructor(a,b,c){super();this.g=a;this.h=b;this.va=c}async*[Symbol.asyncIterator](a){B(a);const b=[];let c=0;for await(const d of I(this.g,a)){0===c%this.va&&b.push([]);for(const e of b)e.push(d);0<b.length&&b[0].length===this.h&&(yield b.shift());c++}for(;0<b.length;)yield b.shift()}};class pa{constructor(){this.l=[]}clear(){this.l=[]}get count(){return this.l.length}get(a){return this.l[a]}push(a){this.l.push(a)}done(){}}
class qa{constructor(a){this.h=0;this.H=a;this.l=new Map}clear(){this.l.clear()}get count(){return this.h}get fa(){return this.H}set fa(a){this.H=a}done(){this.H--}get(a){if(!this.l.has(a))throw Error("Element no longer available in the buffer.");const b=this.l.get(a),c=b.value;0===--b.count&&this.l.delete(a);return c}push(a){this.l.set(this.h++,{value:a,count:this.H})}};class ra extends C{constructor(a){super();this.m=a}async*[Symbol.asyncIterator](a){B(a);a=await this.m(a);let b;for(;!(b=await a.next()).done;)yield b.value}};class J extends C{constructor(a,b){super();this.I=this.aa=null;this.ca=!1;this.g=a;this.J=b}[Symbol.asyncIterator](a){B(a);return this._getIterable(0)}async *_getIterable(a=0){--a;let b=!1;const c=this.J;try{do if(++a<c.count)yield c.get(a);else{if(this.ca)throw this.aa;null===this.I&&(this.I=this.g.next().then(d=>{this.I=null;d.done||c.push(d.value);return d}));({done:b}=await this.I.catch(d=>{this.aa=d;this.ca=!0;throw d;}));b||(yield c.get(a))}while(!b)}finally{c.done()}}}
function sa(a=-1,b){return function(c){return b?new ra(()=>b(sa(a)(c))[Symbol.asyncIterator]()):-1===a?new J(c[Symbol.asyncIterator](),new pa):new J(c[Symbol.asyncIterator](),new qa(a))}};async function K(a){"function"===typeof a.return&&await a.return()};class ta extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);let b=null,c=!1;for(const d of this.g){const e=I(d,a)[Symbol.asyncIterator]();b=null;for(c=!1;;){let g={};try{const {done:k,value:n}=await e.next();if(k){await K(e);break}g=n}catch(k){b=k;c=!0;await K(e);break}yield g}if(!c)break}if(c)throw b;}};function ua(a){return null===a||"object"!==typeof a&&"function"!==typeof a}const va=new WeakMap;
function L(a){let b;return(new Promise((c,d)=>{b={resolve:c,reject:d};for(const e of a){if(ua(e)){Promise.resolve(e).then(c,d);continue}let g=va.get(e);void 0===g?(g={C:new Set([b]),Z:!1},va.set(e,g),Promise.resolve(e).then(k=>{for(const {resolve:n}of g.C)n(k);g.C.clear();g.Z=!0},k=>{for(const {reject:n}of g.C)n(k);g.C.clear();g.Z=!0})):g.Z?Promise.resolve(e).then(c,d):g.C.add(b)}})).finally(()=>{for(const c of a)ua(c)||va.get(c).C.delete(b)})};const wa=new Promise(()=>{});function xa(a,b){return a.then(c=>({value:c,index:b}))}
class ya extends C{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){B(a);const b=this.v.length,c=Array(b),d=Array(b);let e=!1;const g=Array(b),k=Array(b);let n=b;k.fill(!1);for(let p=0;p<b;p++){const q=I(this.v[p],a)[Symbol.asyncIterator]();c[p]=q;d[p]=xa(q.next(),p)}for(;0<n;){a=L(d);const {value:{value:p,done:q},index:w}=await a;if(q)d[w]=wa,n--;else if(g[w]=p,k[w]=!0,d[w]=xa(c[w].next(),w),e||=k.every(l))yield g}}};class za extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);for(const b of this.g)for await(const c of I(b,a))yield c}};class Aa extends C{async*[Symbol.asyncIterator](a){B(a)}};new Promise(()=>{});const Ba="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class Ca extends C{constructor(a){super();this.da=a}[Symbol.asyncIterator](){const a=this.da,b=a.getReader();return Da(a,b,Ea(b))}}class Fa extends Ca{[Symbol.asyncIterator](){var a=this.da;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=Da(a,b,Ga(b));a.next();return a}}
async function*Da(a,b,c){let d=!1;try{yield*c}catch(e){(d=!0,b)&&await b.cancel(e)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(e){}}}async function*Ea(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*Ga(a){var b;for(b=yield null;!(b=await Ha(a,b)).done;)b=yield b.value}
async function Ha(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof Ba)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Ia(a,c,0,b)}async function Ia(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:e,value:g}=await a.read(new Uint8Array(b,c,d-c));return(c+=g.byteLength)<d&&!e?await Ia(a,g.buffer,c,d):{done:e,value:new Uint8Array(g.buffer,0,c)}}
function Ja(a,b){return b&&"byob"===b.mode?new Fa(a):new Ca(a)};function N(a,b){return new Promise((c,d)=>{function e(){clearTimeout(g);d(new A)}b&&b.aborted&&d(new A);const g=setTimeout(()=>{if(b&&(b.removeEventListener("abort",e),b.aborted)){e();return}c()},a);b&&b.addEventListener("abort",e,{once:!0})})};async function O(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)};class Ka extends C{constructor(a){super();this.s=a}async*[Symbol.asyncIterator](a){B(a);let b=0;for(;;)await N(this.s,a),yield b++}};const La=new Promise(()=>{});function Ma(a,b){return a.then(c=>({value:c,index:b}))}class Na extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);const b=this.g.length,c=Array(b),d=Array(b);let e=b;for(let g=0;g<b;g++){const k=I(this.g[g],a)[Symbol.asyncIterator]();c[g]=k;d[g]=Ma(k.next(),g)}for(;0<e;){a=L(d);const {value:{done:g,value:k},index:n}=await a;g?(d[n]=La,e--):(d[n]=Ma(c[n].next(),n),yield k)}}}function Oa(a,...b){return new Na([a,...b])};class Pa extends C{constructor(){var a=[Qa];super();this.o=a}async*[Symbol.asyncIterator](a){B(a);for(const b of this.o)yield b}};function Ra(a,b){return a.then(c=>({value:c,index:b}))}class Sa extends C{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){B(a);var b=this.v,c=b.length;const d=Array(c);var e=Array(c);for(let n=0;n<c;n++){const p=I(b[n],a)[Symbol.asyncIterator]();d[n]=p;e[n]=Ra(p.next(),n)}a=L(e);const {value:g,index:k}=await a;g.done||(yield g.value);a=d[k];for(b=0;b<c;b++)b!==k&&(e=d[b],e.return&&e.return());for(;!(c=await a.next()).done;)yield c.value}};async function Ta(a,b){B(b);const c=[];for await(const d of I(a,b))c.push(d);return c};class Ua extends J{constructor(a){super(a,new qa(0))}[Symbol.asyncIterator](a){B(a);this.J.fa++;return this._getIterable(this.J.count)[Symbol.asyncIterator]()}}function Va(a){return function(b){return a?new ra(async()=>a(Va()(b))[Symbol.asyncIterator]()):new Ua(b[Symbol.asyncIterator]())}};function Wa(a,b,c=0,d=b.byteLength){const e=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,e);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,e,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Xa{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Ya extends Xa{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class Za extends Xa{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.xa=new Ya(a)}async pull(a){if(!a.byobRequest)return await this.xa.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Wa(b,d))}}a.close()}}
const $a=(()=>{let a,b,c=(e,g)=>{class k extends ReadableStream{[Symbol.asyncIterator](){return Ja(this)[Symbol.asyncIterator]()}}class n extends ReadableStream{[Symbol.asyncIterator](){return Ja(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=n;b=k;c=d;return d(e,g)};const d=(e,g)=>e instanceof Za?new a(e,g):new b(e,g);return(e,g)=>c(e,g)})();function P(a,b){return b&&"type"in b&&"bytes"===b.type?$a(new Za(a[Symbol.asyncIterator](),b),b):$a(new Ya(a[Symbol.asyncIterator]()),b)}C.prototype.tee=function(){return ab(this).tee()};
C.prototype.pipeTo=function(a,b){return ab(this).pipeTo(a,b)};C.prototype.pipeThrough=function(a,b){return ab(this).pipeThrough(a,b)};function ab(a){return a.ga||(a.ga=a.B(Va(),P))}C.prototype.toDOMStream=function(a){return a?P(this,a):P(this)};const Q=()=>{};function cb(a,b,c){return a&&"object"===typeof a?{next:r(a.next)?d=>a.next(d):Q,error:r(a.error)?d=>a.error(d):Q,complete:r(a.complete)?()=>a.complete():Q}:{next:r(a)?a:Q,error:r(b)?b:Q,complete:r(c)?c:Q}};class db extends C{constructor(a,b){super();this.ja=a;this.g=b}async*[Symbol.asyncIterator](a){for(B(a);await this.ja(a);)for await(const b of I(this.g,a))yield b}};class eb extends C{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){B(a);const b=this.v.length,c=this.v.map(d=>I(d,a)[Symbol.asyncIterator]());for(;0<b;){const d=Array(b);for(let e=-1;++e<b;){const {value:g,done:k}=await c[e].next();if(k){await Promise.all(c.map(K));return}d[e]=g}yield d}}};class fb extends C{constructor(a,b,c){super();this.g=a;this.i=b;this.A=c}async*[Symbol.asyncIterator](a){B(a);let b=0;for await(const c of I(this.g,a))yield await this.i.call(this.A,c,b++,a)}}function gb(a,b){return function(c){return new fb(c,a,b)}};const hb={},Qa={};class ib extends C{constructor(a,b,c){super();this.source=a;this.bufferSize=b;this.ya=c}async*[Symbol.asyncIterator](a){const b=[];var c=(new Ka(this.ya)).B(gb(()=>hb));c=Oa(new za([this.source,new Pa]),c);for await(const d of I(c,a)){if(d===Qa)break;d!==hb&&b.push(d);if(b.length>=this.bufferSize||b.length&&d===hb)yield b.slice(),b.length=0}b.length&&(yield b)}};class jb extends C{constructor(a,b){super();this.g=a;this.oa=b}async*[Symbol.asyncIterator](a){B(a);let b,c=!1;const d=I(this.g,a)[Symbol.asyncIterator]();for(;;){let e={};try{if(e=await d.next(),e.done){await K(d);break}}catch(g){b=await this.oa(g,a);c=!0;await K(d);break}yield e.value}if(c)for await(const e of I(b,a))yield e}};class kb extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);for await(const b of I(this.g,a))for await(const c of I(b,a))yield c}};class lb extends C{constructor(a,b,c){super();this.g=a;this.i=b;this.A=c}async*[Symbol.asyncIterator](a){B(a);let b=0;const c=this.A,d=this.i;for await(const g of I(this.g,a)){var e=d.call(c,g,b++,a);e=t(e)&&r(e.then)?await e:e;for await(const k of I(C.as(e),a))yield k}}};class mb extends C{constructor(a,b){super();this.g=a;this.W=b}async*[Symbol.asyncIterator](a){B(a);let b=!1,c=()=>{},d=()=>{},e=new Promise((g,k)=>{d=g;c=k});for((async()=>{let g=null;const k=n=>{g=null;d(n);e=new Promise((p,q)=>{d=p;c=q})};a&&a.addEventListener("abort",()=>{b=!0;g&&clearTimeout(g);g=null;c(new A)},{once:!0});try{let n;const p=this.g[Symbol.asyncIterator](a);for(;!b&&!(n=await p.next()).done&&!b;)g&&clearTimeout(g),g=setTimeout(k,this.W,n.value)}catch(n){c(n)}b=!0})();!b;)yield await e}}
;class nb extends C{constructor(a,b){super();this.g=a;this.ka=b}async*[Symbol.asyncIterator](a){B(a);let b=1;for await(const c of I(this.g,a))b=2,yield c;1===b&&(yield this.ka)}};class ob extends C{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){B(a);for await(const b of I(this.g,a))await N(this.s,a),yield b}};class pb extends C{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){B(a);await N(this.s,a);for await(const b of I(this.g,a))yield b}};async function R(a,b,c){for(let d=0,e=a.length;d<e;d++)if(await c(b,a[d]))return d;return-1};class qb extends C{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){B(a);const b=[];for await(const c of I(this.g,a)){const d=await this.u(c,a);-1===await R(b,d,this.j)&&(b.push(d),yield c)}}};class rb extends C{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){B(a);let b,c=!1;for await(const d of I(this.g,a)){const e=await this.u(d,a);let g=!1;c&&(g=await this.j(b,e));c&&g||(c=!0,b=e,yield d)}}};class sb extends C{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){B(a);for await(const b of I(this.g,a))yield b;for(const b of this.o)yield b}};class tb extends C{constructor(a,b,c){super();this.L=a;this.T=b;this.j=c}async*[Symbol.asyncIterator](a){B(a);const b=[];for await(const c of I(this.T,a))b.push(c);for await(const c of I(this.L,a))-1===await R(b,c,this.j)&&(b.push(c),yield c)}};class ub extends C{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](a){B(a);const b=[this.g];for(;0<b.length;){var c=b.shift();for await(const d of I(c,a))c=await this.i(d,a),b.push(c),yield d}}};class vb extends C{constructor(a,b,c){super();this.g=a;this.D=b;this.A=c}async*[Symbol.asyncIterator](a){B(a);let b=0;for await(const c of I(this.g,a))await this.D.call(this.A,c,b++)&&(yield c)}};class wb extends C{constructor(a,b){super();this.g=a;this.ha=b}async*[Symbol.asyncIterator](a){B(a);try{for await(const b of I(this.g,a))yield b}finally{await this.ha()}}};const xb=new Promise(()=>{});function yb(a){return function(b){if(a.aborted&&b instanceof A)return xb;throw b;}}async function*zb(a,b,c,d){B(d);for await(const e of I(a,d))B(d),yield{type:c,index:b,value:e};return{type:c,index:b,value:void 0}}
class S extends C{constructor(a,b,c,d,e){super();this.g=a;this.i=b;this.$=c;this.ea=d;this.A=e;this.$=this.ea?1:Math.max(c,1)}async*[Symbol.asyncIterator](a){function b(x){++d;const u=bb.pop()||d;p&&H[u-1]&&H[u-1].abort();H[u-1]=new AbortController;const v=H[u-1].signal;x=n.call(k,x,e++,v);M[u]=c(u,v,x).catch(yb(v))}function c(x,u,v){return t(v)&&r(v.then)?v.then(E=>c(x,u,E)):(ia[x-1]=zb(C.as(v),x,1,u)).next()}B(a);let d=0,e=0,g=!1;const k=this.A,n=this.i,p=this.ea,q=this.$,w=[],bb=[],H=Array(isFinite(q)?
q:0),ia=Array(isFinite(q)?q:0);a=zb(this.g,0,0,a);const M=[a.next()];try{do{const {done:x=!1,value:{type:u,value:v,index:E}}=await L(M);if(x)switch(M[E]=xb,u){case 0:g=!0;break;case 1:for(--d,bb.push(E);d<q&&w.length;)b(w.shift())}else switch(u){case 0:p&&(d=0);d<q?b(v):w.push(v);M[0]=a.next();break;case 1:yield v;const {[E-1]:gc}=ia,{[E-1]:{signal:hc}}=H;M[E]=gc.next().catch(yb(hc))}}while(!g||0<d+w.length)}finally{H.forEach(x=>x?.abort()),await Promise.all([a,...ia].map(K))}}};function Ab(a,b=Infinity,c){return function(d){return new S(d,a,b,!1,c)}};function Bb(a=-1,b=Infinity){a=0>a?Infinity:a;return function(c){return Ab(d=>t(d)&&r(d[Symbol.asyncIterator])?0<a?Bb(a-1)(d):d:[d],b)(c)}};async function Cb(a,b,c,d){const e=new Map;for await(const k of I(a,d)){var g=await b(k,d);a=e.get(g);e.has(g)||(a=[],e.set(g,a));g=await c(k,d);a.push(g)}return e};class Db extends C{constructor(a,b){super();this.key=a;this.g=b}async*[Symbol.asyncIterator](a){B(a);for(const b of this.g)yield b}}class Eb extends C{constructor(a,b,c){super();this.g=a;this.u=b;this.ma=c}async*[Symbol.asyncIterator](a){B(a);a=await Cb(this.g,this.u,this.ma,a);for(const [b,c]of a)yield new Db(b,c)}};class Fb extends C{constructor(a,b,c,d,e){super();this.P=a;this.M=b;this.R=c;this.N=d;this.S=e}async*[Symbol.asyncIterator](a){B(a);const b=await Cb(this.M,this.N,l,a);for await(const d of I(this.P,a)){var c=await this.R(d,a);c=b.has(c)?b.get(c):new Aa;yield await this.S(d,C.as(c),a)}}};class Gb extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);for await(const b of I(this.g,a));}};class Hb extends C{constructor(a,b,c,d,e){super();this.P=a;this.M=b;this.R=c;this.N=d;this.S=e}async*[Symbol.asyncIterator](a){B(a);const b=await Cb(this.M,this.N,l,a);for await(const c of I(this.P,a)){const d=await this.R(c,a);if(b.has(d))for(const e of b.get(d))yield await this.S(c,e,a)}}};async function Ib(a,b,c,d){B(d);b=await R(a,b,c);if(-1===b)return!1;a.splice(b,1);return!0}class Jb extends C{constructor(a,b,c){super();this.L=a;this.T=b;this.j=c}async*[Symbol.asyncIterator](a){const b=[];for await(const c of I(this.T,a))b.push(c);for await(const c of I(this.L,a))await Ib(b,c,this.j,a)&&(yield c)}};function T(a,b){return a>b?1:a<b?-1:0};class Kb extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);a=await Ta(this.g,a);const b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=d;c.sort(this._getSorter(a));for(const d of c)yield a[d]}thenBy(a,b=T){return new U(this.g,a,b,!1,this)}thenByDescending(a,b=T){return new U(this.g,a,b,!0,this)}}
class U extends Kb{constructor(a,b,c,d,e){super(a);this.u=b;this.j=c;this.la=d;this.ta=e}_getSorter(a,b){const c=a.map(this.u),d=this.j,e=this.ta,g=this.la,k=(n,p)=>{const q=d(c[n],c[p]);return 0===q?b?b(n,p):n-p:g?-q:q};return e?e._getSorter(a,k):k}};class Lb extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);let b,c=!1;for await(const d of I(this.g,a))c?yield[b,d]:c=!0,b=d}};function Mb(a,b){return c=>{var d=c;for(c=0;c<b;c++)if(d=d[a[c]],"undefined"===typeof d)return;return d}};class Nb extends C{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){B(a);if(-1===this.h)for(;;)for await(var b of I(this.g,a))yield b;else for(b=0;b<this.h;b++)for await(const c of I(this.g,a))yield c}};class V{forEach(a,b){a=h(a,b);b=0;for(const c of this)a(c,b++)}B(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](V.as(d));return d}static as(a){return a instanceof V?a:"string"===typeof a?new W([a],l):z(a)||y(a)?new W(a,l):new W([a],l)}static from(a,b=l,c){b=h(b,c);if(z(a)||y(a))return new W(a,b);if(aa(a))return new W({[Symbol.iterator]:()=>a},b);throw new TypeError("Input type not supported");}}V.prototype[Symbol.toStringTag]="IterableX";
Object.defineProperty(V,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});class W extends V{constructor(a,b){super();this.g=a;this.m=b}*[Symbol.iterator](){let a=0;if(z(this.g))for(var b of this.g)yield this.m(b,a++);else for(b=Math.min(Math.max(ea(this.g.length),0),fa);a<b;)yield this.m(this.g[a],a++)}}
try{(a=>{if(!a){V.prototype.pipe=function(...c){let d=-1;const e=c.length;let g=this,k;for(;++d<e;)if(k=c[d],"function"===typeof k)g=k(V.as(g));else if(da(k))return{end:c=!0}=c[d+1]||{},ca(g)?g.B(k,{end:c}):V.as(g).Aa(b(k)).B(k,{end:c});return g};var b=(c,d=c.wa||{za:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class Ob extends V{constructor(a){super();this.o=a}*[Symbol.iterator](){yield*this.o}};class Pb extends V{constructor(a,b){super();this.g=a;this.h=b}*[Symbol.iterator](){if(-1===this.h)for(;;)for(var a of this.g)yield a;else for(a=0;a<this.h;a++)for(const b of this.g)yield b}};function Qb(a,b=-1){return new Pb(new Ob([a]),b)};class Rb extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);const b=[];for await(const c of I(this.g,a))b.unshift(c);yield*b}};class Sb extends C{constructor(a,b){super();this.g=a;this.m=b.callback;this.G=b.hasOwnProperty("seed");this.U=b.seed}async*[Symbol.asyncIterator](a){B(a);let b=!1,c=this.U;const d=await Ta(this.g,a);for(let e=d.length-1;0<=e;e--){const g=d[e];(b||=this.G)?(c=await this.m(c,g,e,a),yield c):(c=g,b=!0)}}};class Tb extends C{constructor(a,b){super();this.g=a;this.m=b.callback;this.G=b.hasOwnProperty("seed");this.U=b.seed}async*[Symbol.asyncIterator](a){B(a);let b=0,c=!1,d=this.U;for await(const e of I(this.g,a))(c||=this.G)?(d=await this.m(d,e,b++,a),yield d):(d=e,c=!0,b++);1!==b||this.G||(yield d)}};class Ub extends C{constructor(a){super();this.pa={next(b){return a.next(b)}}}[Symbol.asyncIterator](a){B(a);return this.pa}};class Vb extends C{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){B(a);const b=[];for await(const c of I(this.g,a))b.push(c),b.length>this.h&&(yield b.shift())}};class Wb extends C{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){B(a);a=I(this.g,a)[Symbol.asyncIterator]();for(var b=this.h;0<b&&!(await a.next()).done;)b--;if(0>=b)for(;!(b=await a.next()).done;)yield b.value}};class Xb extends C{constructor(a,b){super();this.g=a;this.O=b}async*[Symbol.asyncIterator](a){B(a);let b=!1;this.O(a).then(()=>b=!0);for await(const c of I(this.g,a))b&&(yield c)}};class Yb extends C{constructor(a,b){super();this.g=a;this.D=b}async*[Symbol.asyncIterator](a){B(a);let b=!1,c=0;for await(const d of I(this.g,a))b||await this.D(d,c++,a)||(b=!0),b&&(yield d)}};class Zb extends C{constructor(a,b,c){super();this.g=a;this.ia=b;this.na=c}async*[Symbol.asyncIterator](a){B(a);a=I(this.g,a)[Symbol.asyncIterator]();for(var b=this.ia;0<b&&!(await a.next()).done;)b--;let c=this.na;if(0<c)for(;!(b=await a.next()).done&&(yield b.value,0!==--c););}};class $b extends C{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){B(a);for(const b of this.o)yield b;for await(const b of I(this.g,a))yield b}};class ac extends C{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){B(a);if(0<this.h){const b=[];for await(const c of I(this.g,a))b.length>=this.h&&b.shift(),b.push(c);for(;0<b.length;)yield b.shift()}}};class bc extends C{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){B(a);let b=this.h;if(0<b)for await(const c of I(this.g,a))if(yield c,0===--b)break}};class cc extends C{constructor(a,b){super();this.g=a;this.O=b}async*[Symbol.asyncIterator](a){B(a);const b=this.O(a).then(()=>{});for(a=I(this.g,a)[Symbol.asyncIterator]();;){var c=a.next();c=await L([b,c]);if(void 0===c||c.done)break;yield c.value}}};class dc extends C{constructor(a,b){super();this.g=a;this.D=b}async*[Symbol.asyncIterator](a){B(a);let b=0;for await(const c of I(this.g,a)){if(!await this.D(c,b++,a))break;yield c}}};class ec extends C{constructor(a,b){super();this.g=a;this.sa=b}async*[Symbol.asyncIterator](a){B(a);const b=this.sa;a=this.g[Symbol.asyncIterator](a);try{for(let c;!(c=await a.next()).done;)b.next&&await b.next(c.value),yield c.value;b.complete&&await b.complete()}catch(c){throw c instanceof A||!b.error||await b.error(c),c;}finally{await K(a)}}};class fc extends C{constructor(a,b){super();this.g=a;this.W=b}async*[Symbol.asyncIterator](a){B(a);let b;for await(const c of I(this.g,a))if(a=Date.now(),!b||a-b>this.W)b=a,yield c}};class ic extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);let b=Date.now();for await(const c of I(this.g,a)){a=Date.now();const d=a-b;b=a;yield{value:c,Ba:d}}}};class X extends Error{constructor(a="Timeout has occurred"){super(a);Object.setPrototypeOf(this,X.prototype);Error.captureStackTrace(this,this.constructor);this.name="TimeoutError"}get [Symbol.toStringTag](){return"TimeoutError"}}Object.defineProperty(X,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return t(a)&&("TimeoutError"===a.constructor.name||"TimeoutError"===a[Symbol.toStringTag])}});
class jc extends C{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){B(a);const b=I(this.g,a)[Symbol.asyncIterator]();try{for(;;){const {type:c,value:d}=await L([b.next().then(e=>({type:"value",value:e})),N(this.s,a).then(()=>({type:"error"}))]);if("error"===c)throw new X;if(!d||d.done)break;yield d.value}}finally{await K(b)}}};class kc extends C{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){B(a);for await(const b of I(this.g,a))yield{time:Date.now(),value:b}}};class lc extends C{constructor(a,b,c){super();this.qa=a;this.ua=b;this.j=c}async*[Symbol.asyncIterator](a){B(a);const b=[];for await(const c of I(this.qa,a))-1===await R(b,c,this.j)&&(b.push(c),yield c);for await(const c of I(this.ua,a))-1===await R(b,c,this.j)&&(b.push(c),yield c)}};const mc=new Promise(()=>{});function Y(a,b){return a.then(c=>({value:c,index:b}))}
class nc extends C{constructor(a,b){super();this.g=a;this.ba=b}async*[Symbol.asyncIterator](a){B(a);const b=this.ba.length;var c=b+1;const d=Array(c);c=Array(c);let e=!1;const g=Array(b),k=Array(b);g.fill(!1);for(let n=0;n<b;n++){const p=I(this.ba[n],a)[Symbol.asyncIterator]();d[n]=p;c[n]=Y(p.next(),n)}a=I(this.g,a)[Symbol.asyncIterator]();d[b]=a;for(c[b]=Y(a.next(),b);;){a=L(c);const {value:{value:n,done:p},index:q}=await a;if(q===b){if(p)break;c[q]=Y(d[q].next(),q);e&&(yield[n,...k])}else p?c[q]=
mc:(k[q]=n,g[q]=!0,e=g.every(l),c[q]=Y(d[q].next(),q))}}};var Z={};Z.BatchAsyncIterable=na;Z.BufferAsyncIterable=oa;Z.CatchWithAsyncIterable=jb;Z.ConcatAllAsyncIterable=kb;Z.DebounceAsyncIterable=mb;Z.DefaultIfEmptyAsyncIterable=nb;Z.DelayAsyncIterable=pb;Z.DelayEachAsyncIterable=ob;Z.DistinctAsyncIterable=qb;Z.DistinctUntilChangedAsyncIterable=rb;Z.EndWithAsyncIterable=sb;Z.ExceptAsyncIterable=tb;Z.ExpandAsyncIterable=ub;Z.FilterAsyncIterable=vb;Z.FinallyAsyncIterable=wb;Z.GroupByAsyncIterable=Eb;Z.GroupJoinAsyncIterable=Fb;Z.GroupedAsyncIterable=Db;
Z.IgnoreElementsAsyncIterable=Gb;Z.IntersectAsyncIterable=Jb;Z.JoinAsyncIterable=Hb;Z.MapAsyncIterable=fb;Z.MemoizeAsyncBuffer=J;Z.OrderedAsyncIterableBaseX=Kb;Z.OrderedAsyncIterableX=U;Z.PairwiseAsyncIterable=Lb;Z.RepeatAsyncIterable=Nb;Z.ReverseAsyncIterable=Rb;Z.ScanAsyncIterable=Tb;Z.ScanRightAsyncIterable=Sb;Z.SkipAsyncIterable=Wb;Z.SkipLastAsyncIterable=Vb;Z.SkipUntilAsyncIterable=Xb;Z.SkipWhileAsyncIterable=Yb;Z.SliceAsyncIterable=Zb;Z.StartWithAsyncIterable=$b;Z.TakeAsyncIterable=bc;
Z.TakeLastAsyncIterable=ac;Z.TakeUntilAsyncIterable=cc;Z.TakeWhileAsyncIterable=dc;Z.TapAsyncIterable=ec;Z.ThrottleAsyncIterable=fc;Z.TimeIntervalAsyncIterable=ic;Z.TimeoutAsyncIterable=jc;Z.TimeoutError=X;Z.TimestampAsyncIterable=kc;Z.UnionAsyncIterable=lc;Z.WithAbortAsyncIterable=G;Z.WithLatestFromAsyncIterable=nc;Z.batch=function(){return function(a){return new na(a)}};Z.buffer=function(a,b){let c=b;null==c&&(c=a);return function(d){return new oa(d,a,c)}};
Z.bufferCountOrTime=function(a,b){return function(c){return new ib(c,a,b)}};Z.catchError=function(a){return function(b){return new jb(b,a)}};Z.combineLatestWith=function(...a){return function(b){return new ya([b,...a])}};Z.concatAll=function(){return function(a){return new kb(a)}};Z.concatMap=function(a,b){return function(c){return new lb(c,a,b)}};Z.concatWith=function(...a){return function(b){return new za([b,...a])}};Z.debounce=function(a){return function(b){return new mb(b,a)}};
Z.defaultIfEmpty=function(a){return function(b){return new nb(b,a)}};Z.delay=function(a){return function(b){return new pb(b,a)}};Z.delayEach=function(a){return function(b){return new ob(b,a)}};Z.distinct=function(a){return function(b){const {keySelector:c=m,comparer:d=O}=a||{};return new qb(b,c,d)}};Z.distinctUntilChanged=function(a){return function(b){const {keySelector:c=m,comparer:d=O}=a||{};return new rb(b,c,d)}};Z.doWhile=function(a){return function(b){return new za([b,new db(a,b)])}};
Z.endWith=function(...a){return function(b){return new sb(b,a)}};Z.except=function(a,b=O){return function(c){return new tb(c,a,b)}};Z.expand=function(a){return function(b){return new ub(b,a)}};Z.filter=function(a,b){return function(c){return new vb(c,a,b)}};Z.finalize=function(a){return function(b){return new wb(b,a)}};Z.flat=Bb;Z.flatMap=Ab;Z.groupBy=function(a,b=m){return function(c){return new Eb(c,a,b)}};Z.groupJoin=function(a,b,c,d){return function(e){return new Fb(e,a,b,c,d)}};
Z.ignoreElements=function(){return function(a){return new Gb(a)}};Z.innerJoin=function(a,b,c,d){return function(e){return new Hb(e,a,b,c,d)}};Z.intersect=function(a,b=O){return function(c){return new Jb(c,a,b)}};Z.map=gb;Z.memoize=sa;Z.mergeAll=function(a=Infinity){return function(b){return new S(b,c=>c,a,!1)}};Z.mergeWith=function(...a){return function(b){return new Na([b,...a])}};Z.orderBy=function(a,b=T){return function(c){return new U(c,a,b,!1)}};
Z.orderByDescending=function(a,b=T){return function(c){return new U(c,a,b,!0)}};Z.pairwise=function(){return function(a){return new Lb(a)}};Z.pluck=function(...a){return function(b){return gb(Mb(a,a.length))(b)}};Z.publish=Va;Z.raceWith=function(...a){return function(b){return new Sa([b,...a])}};Z.repeat=function(a=-1){return function(b){return new Nb(b,a)}};Z.retry=function(a=-1){return function(b){return new ta(Qb(b,a))}};Z.reverse=function(){return function(a){return new Rb(a)}};
Z.scan=function(a){return function(b){return new Tb(b,a)}};Z.scanRight=function(a){return function(b){return new Sb(b,a)}};Z.share=function(a){return function(b){return a?new ra(async c=>(await a(new Ub(b[Symbol.asyncIterator](c)),c))[Symbol.asyncIterator](c)):new Ub(b[Symbol.asyncIterator]())}};Z.skip=function(a){return function(b){return new Wb(b,a)}};Z.skipLast=function(a){return function(b){return new Vb(b,a)}};Z.skipUntil=function(a){return function(b){return new Xb(b,a)}};
Z.skipWhile=function(a){return function(b){return new Yb(b,a)}};Z.slice=function(a,b=Infinity){return function(c){return new Zb(c,a,b)}};Z.startWith=function(...a){return function(b){return new $b(b,a)}};Z.switchAll=function(){return function(a){return new S(a,b=>b,1,!0)}};Z.switchMap=function(a,b){return function(c){return new S(c,a,1,!0,b)}};Z.take=function(a){return function(b){return new bc(b,a)}};Z.takeLast=function(a){return function(b){return new ac(b,a)}};
Z.takeUntil=function(a){return function(b){return new cc(b,a)}};Z.takeWhile=function(a){return function(b){return new dc(b,a)}};Z.tap=function(a,b,c){return function(d){return new ec(d,cb(a,b,c))}};Z.thenBy=function(a,b=T){return function(c){return new U(c.g,a,b,!1,c)}};Z.thenByDescending=function(a,b=T){return function(c){return new U(c.g,a,b,!0,c)}};Z.throttle=function(a){return function(b){return new fc(b,a)}};Z.timeInterval=function(){return function(a){return new ic(a)}};
Z.timeout=function(a){return function(b){return new jc(b,a)}};Z.timestamp=function(){return function(a){return new kc(a)}};Z.toDOMStream=function(a){return function(b){return P(b,a)}};Z.union=function(a,b=O){return function(c){return new lc(c,a,b)}};Z.withAbort=function(a){return function(b){return new G(b,a)}};Z.withLatestFrom=function(...a){return function(b){return new nc(b,a)}};Z.wrapWithAbort=I;Z.zipWith=function(...a){return function(b){return new eb([b,...a])}};f.prototype[Symbol.toStringTag]="__await";Object.defineProperty(f,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.asynciterable.operators.esnext.min.js.map
